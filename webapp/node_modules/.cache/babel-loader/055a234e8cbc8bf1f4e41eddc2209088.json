{"ast":null,"code":"var _jsxFileName = \"/Users/lucasmendes/Documents/Development/scannerbook/webapp/src/pages/Main/Scanner/scanner.js\";\n\n/* eslint-disable no-plusplus */\nimport React, { useEffect } from 'react';\nimport Quagga from 'quagga';\nimport { validateIsbn } from '../../../services/books';\nimport { Video, Container, ScanMarker } from './styles';\n\nfunction Scanner() {\n  let scannerAttempts = 0;\n\n  const onDetected = result => {\n    Quagga.offDetected(onDetected);\n    const isbn = result.codeResult.code;\n\n    if (validateIsbn(isbn)) {\n      alert(`ISBN é válido ${isbn}`);\n    } else if (scannerAttempts >= 5) {\n      alert('Não é possível ler o código do livro, por favor, tente novamente.');\n    }\n\n    scannerAttempts++;\n    Quagga.onDetected(onDetected);\n  };\n\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      Quagga.init({\n        inputStream: {\n          name: 'Live',\n          type: 'LiveStream',\n          target: document.querySelector('#video'),\n          constraints: {\n            facingMode: 'environment'\n          }\n        },\n        numOfWorkers: 1,\n        locate: true,\n        decoder: {\n          readers: ['ean_reader']\n        }\n      }, err => {\n        if (err) {\n          console.error(err);\n          alert('Erro ao abrir a câmera do dispositivo, por favor, dê a permissão de uso.');\n        }\n\n        Quagga.start();\n      });\n      Quagga.onDetected(onDetected);\n    }\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Video, {\n    id: \"video\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ScanMarker, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: \"../../../assets/images/scan-mark.svg\",\n    alt: \"Marca para leitura do c\\xF3digo\",\n    width: \"260\",\n    height: \"260\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, \"Aponte para o c\\xF3digo de barras do livro\"))));\n}\n\nexport default Scanner;","map":{"version":3,"sources":["/Users/lucasmendes/Documents/Development/scannerbook/webapp/src/pages/Main/Scanner/scanner.js"],"names":["React","useEffect","Quagga","validateIsbn","Video","Container","ScanMarker","Scanner","scannerAttempts","onDetected","result","offDetected","isbn","codeResult","code","alert","navigator","mediaDevices","getUserMedia","init","inputStream","name","type","target","document","querySelector","constraints","facingMode","numOfWorkers","locate","decoder","readers","err","console","error","start"],"mappings":";;AAAA;AACA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,YAAT,QAA6B,yBAA7B;AAEA,SAASC,KAAT,EAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,UAA7C;;AAEA,SAASC,OAAT,GAAmB;AACjB,MAAIC,eAAe,GAAG,CAAtB;;AAEA,QAAMC,UAAU,GAAGC,MAAM,IAAI;AAC3BR,IAAAA,MAAM,CAACS,WAAP,CAAmBF,UAAnB;AAEA,UAAMG,IAAI,GAAGF,MAAM,CAACG,UAAP,CAAkBC,IAA/B;;AAEA,QAAIX,YAAY,CAACS,IAAD,CAAhB,EAAwB;AACtBG,MAAAA,KAAK,CAAE,iBAAgBH,IAAK,EAAvB,CAAL;AACD,KAFD,MAEO,IAAIJ,eAAe,IAAI,CAAvB,EAA0B;AAC/BO,MAAAA,KAAK,CACH,mEADG,CAAL;AAGD;;AAEDP,IAAAA,eAAe;AACfN,IAAAA,MAAM,CAACO,UAAP,CAAkBA,UAAlB;AACD,GAfD;;AAiBAR,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIe,SAAS,CAACC,YAAV,IAA0BD,SAAS,CAACC,YAAV,CAAuBC,YAArD,EAAmE;AACjEhB,MAAAA,MAAM,CAACiB,IAAP,CACE;AACEC,QAAAA,WAAW,EAAE;AACXC,UAAAA,IAAI,EAAE,MADK;AAEXC,UAAAA,IAAI,EAAE,YAFK;AAGXC,UAAAA,MAAM,EAAEC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAHG;AAIXC,UAAAA,WAAW,EAAE;AACXC,YAAAA,UAAU,EAAE;AADD;AAJF,SADf;AASEC,QAAAA,YAAY,EAAE,CAThB;AAUEC,QAAAA,MAAM,EAAE,IAVV;AAWEC,QAAAA,OAAO,EAAE;AACPC,UAAAA,OAAO,EAAE,CAAC,YAAD;AADF;AAXX,OADF,EAgBEC,GAAG,IAAI;AACL,YAAIA,GAAJ,EAAS;AACPC,UAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACAjB,UAAAA,KAAK,CACH,0EADG,CAAL;AAGD;;AAEDb,QAAAA,MAAM,CAACiC,KAAP;AACD,OAzBH;AA4BAjC,MAAAA,MAAM,CAACO,UAAP,CAAkBA,UAAlB;AACD;AACF,GAhCQ,EAgCN,EAhCM,CAAT;AAkCA,sBACE,uDACE,oBAAC,KAAD;AAAO,IAAA,EAAE,EAAC,OAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,GAAG,EAAC,sCADN;AAEE,IAAA,GAAG,EAAC,iCAFN;AAGE,IAAA,KAAK,EAAC,KAHR;AAIE,IAAA,MAAM,EAAC,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAOE;AAAG,IAAA,SAAS,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAPF,CADF,CAFF,CADF;AAsBD;;AAED,eAAeF,OAAf","sourcesContent":["/* eslint-disable no-plusplus */\nimport React, { useEffect } from 'react';\nimport Quagga from 'quagga';\nimport { validateIsbn } from '../../../services/books';\n\nimport { Video, Container, ScanMarker } from './styles';\n\nfunction Scanner() {\n  let scannerAttempts = 0;\n\n  const onDetected = result => {\n    Quagga.offDetected(onDetected);\n\n    const isbn = result.codeResult.code;\n\n    if (validateIsbn(isbn)) {\n      alert(`ISBN é válido ${isbn}`);\n    } else if (scannerAttempts >= 5) {\n      alert(\n        'Não é possível ler o código do livro, por favor, tente novamente.'\n      );\n    }\n\n    scannerAttempts++;\n    Quagga.onDetected(onDetected);\n  };\n\n  useEffect(() => {\n    if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n      Quagga.init(\n        {\n          inputStream: {\n            name: 'Live',\n            type: 'LiveStream',\n            target: document.querySelector('#video'),\n            constraints: {\n              facingMode: 'environment',\n            },\n          },\n          numOfWorkers: 1,\n          locate: true,\n          decoder: {\n            readers: ['ean_reader'],\n          },\n        },\n        err => {\n          if (err) {\n            console.error(err);\n            alert(\n              'Erro ao abrir a câmera do dispositivo, por favor, dê a permissão de uso.'\n            );\n          }\n\n          Quagga.start();\n        }\n      );\n\n      Quagga.onDetected(onDetected);\n    }\n  }, []);\n\n  return (\n    <>\n      <Video id=\"video\" />\n      <Container>\n        <ScanMarker>\n          <img\n            src=\"../../../assets/images/scan-mark.svg\"\n            alt=\"Marca para leitura do código\"\n            width=\"260\"\n            height=\"260\"\n          />\n          <p className=\"label\">Aponte para o código de barras do livro</p>\n          {/* <img\n            src=\"../../../assets/images/logo.svg\"\n            alt=\"Marca para leitura do código\"\n            width=\"260\"\n            height=\"260\"\n          /> */}\n        </ScanMarker>\n      </Container>\n    </>\n  );\n}\n\nexport default Scanner;\n"]},"metadata":{},"sourceType":"module"}